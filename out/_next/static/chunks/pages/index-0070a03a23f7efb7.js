(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(5855)}])},5855:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(5893);let n=e=>{let{streamLink:t,showStatic:s,name:n,stopRecording:l}=e,r=(0,a.jsx)("video",{className:"w-full h-full",muted:!0,autoPlay:!0,loop:!0,children:(0,a.jsx)("source",{src:"/static.mp4",type:"video/mp4"})});return s||(r=(0,a.jsx)("iframe",{className:"w-full h-[50vh] pointer-events-none",src:t})),(0,a.jsxs)("div",{className:"relative flex-1 w-0 bg-black",children:[r,!l&&(0,a.jsx)("div",{className:"absolute top-4 left-4 w-6 h-6 rounded-full bg-red-600 animate-blink"}),(0,a.jsx)("span",{className:"absolute top-4 right-4 bg-black text-white",children:n})]})};var l=s(7294),r=s(623),i=s(903),o=s(6962),c=s(1616),u=s.n(c);function m(e){let{success:t,visible:s}=e;return s?(0,a.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 translate-y-1/2 text-6xl pointer-events-none z-50",children:(0,a.jsx)("span",{className:"text-6xl p-4 "+(t?"bg-green-600":"bg-red-600"),children:t?"ACCESS GRANTED":"ACCESS DENIED"})}):null}function d(e){let{onDisableCameras:t}=e,[s,n]=(0,l.useState)(""),[c,u]=(0,l.useState)(!1),[d,h]=(0,l.useState)(!1),[x,b]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("form",{className:"mt-7 mb-7",onSubmit:e=>{c||(h(!0),setTimeout(()=>h(!1),2e3)),"ART42"!==s||c||u(!0),e.preventDefault()},children:[(0,a.jsx)("label",{htmlFor:"pw",children:"Enter password:"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"text",name:"pw",className:"outline outline-1 h-6",value:s,onChange:e=>n(e.target.value),disabled:c}),(0,a.jsx)("button",{type:"submit",className:"outline outline-1 ml-1",disabled:c,children:(0,a.jsx)(r,{className:"w-6 h-6 mt-auto mb-auto"})})]})]}),(0,a.jsxs)("div",{className:"relative overflow-visible whitespace-nowrap",children:[(0,a.jsx)(m,{success:c,visible:d}),(0,a.jsxs)("button",{className:"relative m-6 p-3 text-lg animate-none "+(c?x?"bg-gray-300 pointer-events-none text-gray-400 line-through":"bg-green-400 hover:bg-green-500":"bg-gray-300 pointer-events-none text-gray-400"),onClick:()=>{b(!0),t()},disabled:!c,children:["Disable cameras",c?x?(0,a.jsx)(o,{className:"absolute h-12 top-1/2 right-0 translate-x-full -translate-y-1/2 text-green-500"}):(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-0 -m-3 bg-green-200 -z-10 animate-fade"}):(0,a.jsx)(i,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-6 h-6 text-black"})]})]})]})}function h(){let[e,t]=(0,l.useState)(null),[s,r]=(0,l.useState)(!1),i="muddescapes/data/Security Cameras/disabled";return(0,l.useEffect)(()=>{let e=u().connect("wss://broker.hivemq.com:8884",{path:"/mqtt"});function s(){r(t=>(e.publish(i,t?"1":"0",{qos:2}),t))}return e.on("connect",()=>{console.debug("connected"),s(),e.subscribe("muddescapes",{qos:2})}),e.on("message",(e,t)=>{s()}),t(e),()=>{e.end()}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(n,{name:"Camera 1 - Main Gallery",showStatic:s,streamLink:"http://localhost:8889/muddescapes-camera-1/",stopRecording:s}),(0,a.jsx)(n,{name:"Camera 2 - Security",showStatic:s,streamLink:"http://localhost:8889/muddescapes-cam-2/",stopRecording:s})]}),(0,a.jsx)(d,{onDisableCameras:()=>{r(!0),null==e||e.publish(i,"1",{qos:2})}})]})}},1784:function(){},5036:function(){},2361:function(){},4616:function(){}},function(e){e.O(0,[293,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);